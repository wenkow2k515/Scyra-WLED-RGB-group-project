<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>RGB Editor</title>
    <script src="/static/js/LEDgrid.js"></script>
    <link rel="stylesheet" href="/static/css/rgb.css">
    <style>
      body, html {
          margin: 0;
          padding: 0;
          height: 100%;
          font-family: Arial, sans-serif;
      }
      .setup-container {
          display: flex;
          flex-direction: row;
          width: 100vw;
          height: 100vh;
      }
      .setup-pane {
          width: 50%;
          height: 100%;
          display: flex;
          flex-direction: column;
          justify-content: center;
          align-items: center;
          padding: 2rem;
          box-sizing: border-box;
          border-right: 1px solid #ccc;
      }
      .setup-pane:last-child {
          border-right: none;
      }
      .setup-pane h2 {
          margin-bottom: 1rem;
      }
      .setup-pane input, 
      .setup-pane button {
          margin-top: 0.5rem;
          padding: 0.5rem;
          font-size: 1rem;
          width: 80%;
          max-width: 300px;
      }
      .setup-pane p {
          margin-top: 1rem;
          color: #555;
      }
      .hidden {
          display: none;
      }
      #editor {
          padding: 2rem;
      }
      .color-grid {
          display: grid;
          grid-template-columns: repeat(auto-fill, minmax(50px, 1fr));
          gap: 10px;
          max-width: 800px;
          margin: 1rem 0;
      }
      .cell {
          width: 50px;
          height: 50px;
          border: 2px solid #ddd;
          cursor: pointer;
          transition: all 0.2s;
      }
      .cell.selected {
          border-color: #000;
          transform: scale(1.1);
      }
    </style>
</head>

{% extends "body.html" %}

{% block content %}

<!-- Setup Phase -->
<div id="setup" class="setup-container">
  <!-- Step 1: WLED IP -->
  <div id="step1" class="setup-pane">
      <h2>Step 1: WLED Address</h2>
      <input type="text" id="wledAddress" placeholder="e.g. 192.168.1.100">
      <button id="checkBtn" disabled>Validate Address</button>
      <p id="checkMsg"></p>
  </div>

  <!-- Step 2: Group Size -->
  <div id="step2" class="setup-pane hidden">
      <h2>Step 2: Group Size</h2>
      <input type="number" id="groupSize" min="1" placeholder="LEDs per group" disabled>
      <button id="toEditor" disabled>Proceed</button>
      <p id="divMsg"></p>
  </div>
</div>

<!-- Editor Phase -->
<div id="editor" class="hidden">
  <h2>Step 3: Build Your Preset</h2>

  <div class="color-grid" id="grid"></div>

  <div style="margin-top:1rem;">
    <label for="colorPicker">Pick Color:</label>
    <input type="color" id="colorPicker" value="#ffffff">

    <label for="briSlider" style="margin-left:1rem;">Brightness:</label>
    <input type="range" id="briSlider" min="0" max="255" value="255">
    <span id="briValue">255</span>

    <div style="margin-top:1rem;">
      <button id="applyColor">Apply Color</button>
      <button id="defaultBtn">Set Default (50% Blue)</button>
      <button id="createBtn">Create JSON</button>
      <button id="outputToTextBoxBtn">Output to Text Box</button>
    </div>
  </div>

  <pre id="output" style="margin-top:1rem; background:#eee; padding:1rem; border-radius:8px;"></pre>
  <textarea id="jsonTextBox" rows="10" style="width: 100%; margin-top: 1rem;" readonly></textarea>
</div>

{% endblock %}
